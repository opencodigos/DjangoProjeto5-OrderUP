{% extends 'base.html' %}
{% block title %}Minhas Reservas{% endblock %}
{% block content %}
<h2 class="mb-4">Minhas Reservas</h2>
{% if reservations %}
<div class="row">
    {% for reservation in reservations %}
    <div class="col-md-6 mb-3">
        <div class="border border-3 rounded p-3 h-100 d-flex flex-column
            {% if reservation.status == 'confirmada' %}border-success
            {% elif reservation.status == 'pendente' %}border-warning
            {% elif reservation.status == 'cancelada' %}border-danger{% endif %}">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <h5>{{ reservation.restaurant.name }}</h5>
                <span class="badge 
                    {% if reservation.status == 'confirmada' %}bg-success
                    {% elif reservation.status == 'pendente' %}bg-warning
                    {% elif reservation.status == 'cancelada' %}bg-danger{% endif %}">
                    {{ reservation.get_status_display }}
                </span>
            </div>
            
            <p class="mb-1">
	            <i class="fas fa-calendar"></i> 
	            {{ reservation.date|date:"d/m/Y" }} às {{ reservation.time|time:"H:i" }}
	          </p>
            
            <p class="mb-1">
	            <i class="fas fa-users"></i> 
		            {{ reservation.guests }} pessoas - Mesa {{ reservation.table.number }}
		        </p>
            
            {% if reservation.notes %}
            <p class="text-muted small mb-2">{{ reservation.notes }}</p>
            {% endif %}
            
            <div class="d-flex justify-content-end gap-2 align-items-center mt-auto">
	            <a href="{% url 'reservation_detail' pk=reservation.pk %}" class="btn btn-sm btn-primary">
	                <i class="fas fa-eye"></i> Ver Detalhes
	            </a>
	            {% if reservation.status == 'confirmada' %}
                <a href="{% url 'create_order' reservation_pk=reservation.pk %}" class="btn btn-success">
                    <i class="fas fa-utensils"></i> Fazer Pedido
                </a>
                {% endif %}
		         </div>
		         
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info">
    <p class="mb-2">Você ainda não tem reservas.</p>
    <a href="{% url 'home' %}" class="btn btn-primary">Encontrar Restaurantes</a>
</div>
{% endif %}
{% endblock %}